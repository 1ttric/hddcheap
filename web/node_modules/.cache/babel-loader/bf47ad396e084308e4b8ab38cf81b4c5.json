{"ast":null,"code":"var _jsxFileName = \"/home/will/git/hddcheap/web/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport MaterialTable from \"material-table\";\nimport { Snackbar } from \"@material-ui/core\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Box from \"@material-ui/core/Box\";\nconst ws = new WebSocket(\"ws://127.0.0.1:8080/ws\");\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: null,\n      lastUpdate: null,\n      updateSnackVisible: false\n    };\n  }\n\n  componentDidMount() {\n    ws.onopen = () => {\n      console.log(\"Websocket connected\");\n    };\n\n    ws.onmessage = msg => {\n      let items = JSON.parse(msg.data);\n      this.setState(state => ({ ...state,\n        items: items,\n        lastUpdate: Date.now().toString(),\n        updateSnackVisible: true\n      }));\n    };\n  }\n\n  renderLoading() {\n    return /*#__PURE__*/React.createElement(LinearProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderLoaded() {\n    // Customize some columns\n    let columns = Object.keys(this.state.items[0]).filter(k => k !== 'tableData').map(k => {\n      switch (k) {\n        case 'url':\n          return {\n            title: k,\n            field: k,\n            render: rowData => /*#__PURE__*/React.createElement(\"a\", {\n              href: rowData.url,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 49,\n                columnNumber: 72\n              }\n            }, rowData.url)\n          };\n\n        default:\n          return {\n            title: k,\n            field: k\n          };\n      }\n    });\n    columns.push({\n      'title': 'history',\n      'field': 'history',\n      render: rowData => /*#__PURE__*/React.createElement(\"a\", {\n        href: \"https://camelcamelcamel.com/product/\" + rowData.asin,\n        target: \"_blank\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 32\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"Graphed price history from camelcamelcamel\",\n        style: {\n          mixBlendMode: 'multiply'\n        },\n        src: \"https://charts.camelcamelcamel.com/us/\" + rowData.asin + \"/amazon-new.png?legend=1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }\n      }))\n    });\n    return /*#__PURE__*/React.createElement(Box, {\n      m: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MaterialTable, {\n      columns: columns,\n      data: this.state.items,\n      title: null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.state.updateSnackVisible,\n      onClose: () => this.setState(state => ({ ...state,\n        updateSnackVisible: false\n      })),\n      autoHideDuration: 2000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MuiAlert, {\n      severity: \"info\",\n      elevation: 6,\n      variant: \"filled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, \"Updated \" + new Date().toTimeString())));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(ThemeProvider, {\n      theme: createMuiTheme(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AppBar, {\n      position: \"static\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Toolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }, \"hdd.cheap\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, this.state.items === null ? this.renderLoading() : this.renderLoaded()));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/will/git/hddcheap/web/src/App.js"],"names":["React","Component","LinearProgress","MaterialTable","Snackbar","MuiAlert","ThemeProvider","createMuiTheme","AppBar","Typography","Toolbar","Box","ws","WebSocket","App","constructor","props","state","items","lastUpdate","updateSnackVisible","componentDidMount","onopen","console","log","onmessage","msg","JSON","parse","data","setState","Date","now","toString","renderLoading","renderLoaded","columns","Object","keys","filter","k","map","title","field","render","rowData","url","push","asin","mixBlendMode","toTimeString"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport MaterialTable from \"material-table\";\nimport {Snackbar} from \"@material-ui/core\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport {ThemeProvider} from \"@material-ui/styles\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Box from \"@material-ui/core/Box\";\n\nconst ws = new WebSocket(\"ws://127.0.0.1:8080/ws\");\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {items: null, lastUpdate: null, updateSnackVisible: false};\n    }\n\n    componentDidMount() {\n        ws.onopen = () => {\n            console.log(\"Websocket connected\");\n        };\n        ws.onmessage = (msg) => {\n            let items = JSON.parse(msg.data);\n            this.setState(state => ({\n                ...state,\n                items: items,\n                lastUpdate: Date.now().toString(),\n                updateSnackVisible: true\n            }))\n        }\n    }\n\n    renderLoading() {\n        return (\n            <LinearProgress/>\n        )\n    }\n\n    renderLoaded() {\n        // Customize some columns\n        let columns = Object.keys(this.state.items[0]).filter(k => (k !== 'tableData')).map(k => {\n                switch (k) {\n                    case 'url':\n                        return {title: k, field: k, render: rowData => <a href={rowData.url}>{rowData.url}</a>};\n                    default:\n                        return {title: k, field: k};\n                }\n            }\n        );\n        columns.push({\n            'title': 'history',\n            'field': 'history',\n            render: rowData => <a href={\"https://camelcamelcamel.com/product/\" + rowData.asin} target={\"_blank\"}>\n                <img alt={\"Graphed price history from camelcamelcamel\"} style={{mixBlendMode: 'multiply'}} src={\"https://charts.camelcamelcamel.com/us/\" + rowData.asin + \"/amazon-new.png?legend=1\"}/>\n            </a>\n        });\n\n        return (\n            <Box m={2}>\n                <MaterialTable columns={columns}\n                               data={this.state.items}\n                               title={null}\n                />\n                <Snackbar open={this.state.updateSnackVisible}\n                          onClose={() => this.setState(state => ({...state, updateSnackVisible: false}))}\n                          autoHideDuration={2000}>\n                    <MuiAlert severity=\"info\" elevation={6}\n                              variant=\"filled\">{\"Updated \" + (new Date()).toTimeString()}</MuiAlert>\n                </Snackbar>\n            </Box>\n        );\n    }\n\n\n\n    render() {\n\n        return (\n            <ThemeProvider theme={createMuiTheme()}>\n                <AppBar position=\"static\">\n                    <Toolbar>\n                        <Typography variant=\"h6\">\n                            hdd.cheap\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n                <div>{this.state.items === null ? this.renderLoading() : this.renderLoaded()}</div>\n            </ThemeProvider>\n        )\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}