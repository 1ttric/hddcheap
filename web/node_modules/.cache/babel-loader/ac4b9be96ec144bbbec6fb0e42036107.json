{"ast":null,"code":"var _jsxFileName = \"/home/will/git/hddcheap/web/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport MaterialTable from \"material-table\";\nimport { Snackbar } from \"@material-ui/core\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport { createStyles, makeStyles, ThemeProvider } from \"@material-ui/styles\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport MenuIcon from '@material-ui/icons/Menu';\nconst ws = new WebSocket(\"ws://127.0.0.1:8080/ws\");\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.useStyles = makeStyles(theme => createStyles({\n      root: {\n        flexGrow: 1\n      },\n      menuButton: {\n        marginRight: theme.spacing(2)\n      },\n      title: {\n        flexGrow: 1\n      }\n    }));\n    this.state = {\n      items: null,\n      lastUpdate: null,\n      updateSnackVisible: false\n    };\n  }\n\n  componentDidMount() {\n    ws.onopen = () => {\n      console.log(\"Websocket connected\");\n    };\n\n    ws.onmessage = msg => {\n      let items = JSON.parse(msg.data);\n      this.setState(state => ({ ...state,\n        items: items,\n        lastUpdate: Date.now().toString(),\n        updateSnackVisible: true\n      }));\n    };\n  }\n\n  renderLoading() {\n    return /*#__PURE__*/React.createElement(LinearProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }\n    });\n  }\n\n  renderLoaded() {\n    // Customize some columns\n    let columns = Object.keys(this.state.items[0]).filter(k => k !== 'tableData').map(k => {\n      switch (k) {\n        case 'url':\n          return {\n            title: k,\n            field: k,\n            render: rowData => /*#__PURE__*/React.createElement(\"a\", {\n              href: rowData.url,\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 50,\n                columnNumber: 72\n              }\n            }, rowData.url)\n          };\n\n        default:\n          return {\n            title: k,\n            field: k\n          };\n      }\n    });\n    columns.push({\n      'title': 'history',\n      'field': 'history',\n      render: rowData => /*#__PURE__*/React.createElement(\"a\", {\n        href: \"https://camelcamelcamel.com/product/\" + rowData.asin,\n        target: \"_blank\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 32\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://charts.camelcamelcamel.com/us/\" + rowData.asin + \"/amazon.png\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }\n      }))\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MaterialTable, {\n      columns: columns,\n      data: this.state.items,\n      title: null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Snackbar, {\n      open: this.state.updateSnackVisible,\n      onClose: () => this.setState(state => ({ ...state,\n        updateSnackVisible: false\n      })),\n      autoHideDuration: 2000,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MuiAlert, {\n      severity: \"info\",\n      elevation: 6,\n      variant: \"filled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, \"Updated \" + new Date().toTimeString())));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(ThemeProvider, {\n      theme: createMuiTheme({\n        palette: {\n          type: 'dark'\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AppBar, {\n      position: \"static\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Toolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      edge: \"start\",\n      className: classes.menuButton,\n      color: \"inherit\",\n      \"aria-label\": \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(MenuIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      className: classes.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }, \"News\"), /*#__PURE__*/React.createElement(Button, {\n      color: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, \"Login\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, this.state.items === null ? this.renderLoading() : this.renderLoaded()));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/will/git/hddcheap/web/src/App.js"],"names":["React","Component","LinearProgress","MaterialTable","Snackbar","MuiAlert","createStyles","makeStyles","ThemeProvider","createMuiTheme","AppBar","Typography","Toolbar","IconButton","Button","MenuIcon","ws","WebSocket","App","constructor","props","useStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","state","items","lastUpdate","updateSnackVisible","componentDidMount","onopen","console","log","onmessage","msg","JSON","parse","data","setState","Date","now","toString","renderLoading","renderLoaded","columns","Object","keys","filter","k","map","field","render","rowData","url","push","asin","toTimeString","palette","type","classes"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './App.css';\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport MaterialTable from \"material-table\";\nimport {Snackbar} from \"@material-ui/core\";\nimport MuiAlert from '@material-ui/lab/Alert';\nimport {createStyles, makeStyles, ThemeProvider} from \"@material-ui/styles\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport MenuIcon from '@material-ui/icons/Menu';\n\nconst ws = new WebSocket(\"ws://127.0.0.1:8080/ws\");\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {items: null, lastUpdate: null, updateSnackVisible: false};\n    }\n\n    componentDidMount() {\n        ws.onopen = () => {\n            console.log(\"Websocket connected\");\n        };\n        ws.onmessage = (msg) => {\n            let items = JSON.parse(msg.data);\n            this.setState(state => ({\n                ...state,\n                items: items,\n                lastUpdate: Date.now().toString(),\n                updateSnackVisible: true\n            }))\n        }\n    }\n\n    renderLoading() {\n        return (\n            <LinearProgress/>\n        )\n    }\n\n    renderLoaded() {\n        // Customize some columns\n        let columns = Object.keys(this.state.items[0]).filter(k => (k !== 'tableData')).map(k => {\n                switch (k) {\n                    case 'url':\n                        return {title: k, field: k, render: rowData => <a href={rowData.url}>{rowData.url}</a>};\n                    default:\n                        return {title: k, field: k};\n                }\n            }\n        );\n        columns.push({\n            'title': 'history',\n            'field': 'history',\n            render: rowData => <a href={\"https://camelcamelcamel.com/product/\" + rowData.asin} target={\"_blank\"}>\n                <img src={\"https://charts.camelcamelcamel.com/us/\" + rowData.asin + \"/amazon.png\"}/>\n            </a>\n        });\n\n        return (\n            <div>\n                <MaterialTable columns={columns}\n                               data={this.state.items}\n                               title={null}\n                />\n                <Snackbar open={this.state.updateSnackVisible}\n                          onClose={() => this.setState(state => ({...state, updateSnackVisible: false}))}\n                          autoHideDuration={2000}>\n                    <MuiAlert severity=\"info\" elevation={6}\n                              variant=\"filled\">{\"Updated \" + (new Date()).toTimeString()}</MuiAlert>\n                </Snackbar>\n            </div>\n        );\n    }\n\n\n    useStyles = makeStyles((theme) =>\n        createStyles({\n            root: {\n                flexGrow: 1,\n            },\n            menuButton: {\n                marginRight: theme.spacing(2),\n            },\n            title: {\n                flexGrow: 1,\n            },\n        }),\n    );\n\n    render() {\n\n        return (\n            <ThemeProvider theme={createMuiTheme({palette: {type: 'dark'}})}>\n                <AppBar position=\"static\">\n                    <Toolbar>\n                        <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n                            <MenuIcon/>\n                        </IconButton>\n                        <Typography variant=\"h6\" className={classes.title}>\n                            News\n                        </Typography>\n                        <Button color=\"inherit\">Login</Button>\n                    </Toolbar>\n                </AppBar>\n                <div>{this.state.items === null ? this.renderLoading() : this.renderLoaded()}</div>\n            </ThemeProvider>\n        )\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}